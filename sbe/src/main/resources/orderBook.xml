<?xml version="1.0" encoding="UTF-8"?>
<sbe:messageSchema xmlns:sbe="http://fixprotocol.io/2016/sbe"
                   package="com.weareadaptive.sbe"
                   id="111"
                   version="1"
                   semanticVersion="0.1"
                   description="Aeron OMS SBE Messages"
                   byteOrder="littleEndian">
    <types>
        <composite name="messageHeader" description="Message identifiers and length of message root.">
            <type name="blockLength" primitiveType="uint16"/>
            <type name="templateId"  primitiveType="uint16"/>
            <type name="schemaId"    primitiveType="uint16"/>
            <type name="version"     primitiveType="uint16"/>
            <type name="correlationId" primitiveType="uint64"/>
        </composite>
        <composite name="groupSizeEncoding" description="Repeating group dimensions.">
            <type name="blockLength" primitiveType="uint16"/>
            <type name="numInGroup"  primitiveType="uint16"/>
        </composite>
        <composite name="varDataEncoding" description="Variable length data blob header.">
            <type name="length"      primitiveType="uint32" maxValue="1073741824"/>
            <type name="varData"     primitiveType="uint8" length="0"/>
        </composite>
        <composite name="varStringEncoding">
            <type name="length" primitiveType="uint32" maxValue="1073741824"/>
            <type name="varData" primitiveType="uint8" length="0" characterEncoding="UTF-8"/>
        </composite>
        <composite name="fixedStringEncoding">
            <type name="string" primitiveType="char" length="20" characterEncoding="UTF-8" description="Fixed-length string"/>
        </composite>


        <enum name="ResultCode" encodingType="int8">
            <validValue name="Ok" description="Success">0</validValue>
            <validValue name="SystemError" description="Some system error">1</validValue>
            <validValue name="UnknownError" description="Unknown failure">2</validValue>
            <validValue name="InvalidCustomer" description="Invalid Customer">3</validValue>
            <validValue name="PriceTooLow" description="Price Too Low">4</validValue>
            <validValue name="ExpiredAuction" description="Auction has run out">5</validValue>
            <validValue name="DuplicationAuction" description="Auction with id already exists">6</validValue>
            <validValue name="InvalidAuctionId" description="Auction id is not valid">7</validValue>
        </enum>
        <enum name="BooleanType" encodingType="uint8">
            <validValue name="F">0</validValue>
            <validValue name="T">1</validValue>
        </enum>

        <enum name="statusType" encodingType="uint8">
            <validValue name="ACTIVE">0</validValue>
            <validValue name="CLOSED">1</validValue>
        </enum>

        <enum name="Side" encodingType="uint8">
            <validValue name="BID">0</validValue>
            <validValue name="ASK">1</validValue>
        </enum>


        <composite name="pricet">
            <type name="mantissa" primitiveType="int64"/>
            <type name="exponent" primitiveType="int8" presence="constant">-9</type>
        </composite>

    </types>

    <sbe:message name="MarketRequest" id="1" description="submit a new market order">
        <field name="username"       id="1"     type="fixedStringEncoding"/>
        <field name="side"           id="2"     type="Side"  />
        <field name="quantity"       id="3"     type="int32" />
        <field name="timestamp"      id="4"     type="uint64"/>
    </sbe:message>

    <sbe:message name="LimitOrderRequest" id="2" description="submit a new limit order">
        <field name="username"       id="1"     type="fixedStringEncoding"/>
        <field name="side"           id="2"     type="Side"             />
        <field name="limitPrice"     id="3"     type="uint64"           />
        <field name="quantity"       id="4"     type="int32"            />
        <field name="timestamp"      id="5"     type="uint64"           />
    </sbe:message>

    <sbe:message name="ActionResult" id="3">
        <data name="resultMessage" id="1" type="varStringEncoding"/>
    </sbe:message>

    <sbe:message name="snapshot" id="4">

    </sbe:message>


</sbe:messageSchema>